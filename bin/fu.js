#!/usr/bin/env node
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@babel/runtime/regenerator"),require("@babel/runtime/helpers/asyncToGenerator"),require("path"),require("fs"),require("commander"),require("chalk"),require("inquirer"),require("handlebars"),require("download-git-repo"),require("ora"),require("child_process")):"function"==typeof define&&define.amd?define(["@babel/runtime/regenerator","@babel/runtime/helpers/asyncToGenerator","path","fs","commander","chalk","inquirer","handlebars","download-git-repo","ora","child_process"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).fu=t(e._regeneratorRuntime,e._asyncToGenerator,e.path,e.fs,e.commander,e.chalk,e.inquirer,e.handlebars,e.downloadGitRepo,e.ora,e.child_process)}(this,function(e,t,n,r,a,o,i,u,s,l,c){"use strict";function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=d(e),t=d(t),f=d(n),m=d(r),a=d(a),g=d(o),h=d(i),v=d(u),b=d(s),y=d(l),l=d(c),q=[{name:"template",type:"list",choices:[{name:"vue-pc-admin",description:"vue-pc-admin (基于 vue 开箱即用的中台前端方案)",gitUrl:"https://github.com/Fuphoenixes/vue-pc-admin.git"},{name:"vue-h5-template",description:"vue-h5-template (基于 vue 开箱即用的移动端H5解决方案)",gitUrl:"https://github.com/Fuphoenixes/vue-h5-template.git"}].map(function(e){return{name:e.description,value:e}}),message:"请选择项目模板"},{name:"name",type:"string",message:"请输入项目名称",default:"project"},{name:"version",type:"string",message:"请设置版本号",default:"0.0.1"},{name:"description",type:"string",message:"请输入项目描述",default:"description"},{name:"author",type:"string",message:"请输入项目作者",default:"author"},{name:"isEslint",type:"confirm",message:"是否开启eslint"}],w=l.default.spawn,c=function(a,e,o){return new Promise(function(t,n){var r=y.default("".concat(a,"模板下载中^.^ 请稍后"));r.start(),b.default("direct:".concat(e),o,{clone:!0},function(e){e?(n(e),r.fail(),console.log(g.default.red("error! ".concat(a,"模板拉取失败")))):(r.succeed(),t())})})},l=function(r,e,t){var a=1<arguments.length&&void 0!==e?e:"npm",o=2<arguments.length&&void 0!==t?t:["install"];return new Promise(function(e,t){console.log(g.default.greenBright("正在安装项目依赖……\n"));var n=w(a,o,{cwd:r||process.cwd(),stdio:"inherit",shell:!0});n.on("exit",function(){console.log(g.default.greenBright("依赖安装完成!")),e()}),n.on("error",function(e){console.log(g.default.red("依赖安装失败")),t(e)})})},a=a.default.program,x=c,k=l;a.version("1.0.2").command("init").description("初始化模板").action(t.default(p.default.mark(function e(){var t,n,r,a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=process.cwd(),e.next=3,h.default.prompt(q);case 3:return n=e.sent,e.next=6,x(n.template.name,n.template.gitUrl,t);case 6:if(r=f.default.join(t,"__package.json"),a=f.default.join(t,"package.json"),m.default.existsSync(r)){e.next=11;break}return console.log(g.default.red("error! 模板有误, 未找到__package.json文件")),e.abrupt("return");case 11:return o=m.default.readFileSync(r).toString(),o=v.default.compile(o),o=o(n),m.default.writeFileSync(a,o),m.default.unlinkSync(r),console.log(g.default.green("success！ 项目初始化成功")+"\n"),e.next=19,k(t);case 19:console.log(g.default.greenBright("开启项目")+"\n"+g.default.greenBright("npm run dev"));case 20:case"end":return e.stop()}},e)}))),a.parse(process.argv);return{}});
